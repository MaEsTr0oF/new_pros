{"ast":null,"code":"import'../styles/filter-styles.css';import React from'react';import{Box,Button,Select,styled,Popover,FormControlLabel,Checkbox,Typography,Slider,TextField,useTheme,useMediaQuery}from'@mui/material';import{KeyboardArrowDown as ArrowDownIcon}from'@mui/icons-material';import{SERVICE_OPTIONS}from'../types';import{serviceTranslations}from'../utils/serviceTranslations';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FilterContainer=styled(Box)(_ref=>{let{theme}=_ref;return{padding:theme.spacing(1.5),display:'grid',gridTemplateColumns:'repeat(auto-fill, minmax(150px, 1fr))',gap:theme.spacing(1.5),backgroundColor:theme.palette.background.paper,borderRadius:0,borderBottom:`1px solid ${theme.palette.divider}`,[theme.breakpoints.down('md')]:{gridTemplateColumns:'repeat(auto-fill, minmax(120px, 1fr))',padding:theme.spacing(1),gap:theme.spacing(1)},[theme.breakpoints.down('sm')]:{gridTemplateColumns:'repeat(auto-fill, minmax(100px, 1fr))',padding:theme.spacing(0.75),gap:theme.spacing(0.75)},[theme.breakpoints.down('xs')]:{gridTemplateColumns:'repeat(2, 1fr)',padding:theme.spacing(0.5),gap:theme.spacing(0.5)}};});const FilterSection=styled(Box)(_ref2=>{let{theme}=_ref2;return{display:'grid',gridTemplateColumns:'1fr',gap:theme.spacing(1),[theme.breakpoints.down('sm')]:{gap:theme.spacing(0.5)}};});const FilterButtonsGrid=styled(Box)(_ref3=>{let{theme}=_ref3;return{display:'grid',gridTemplateColumns:'repeat(auto-fill, minmax(100px, 1fr))',gap:theme.spacing(1),margin:theme.spacing(0,0,1,0),[theme.breakpoints.down('md')]:{gridTemplateColumns:'repeat(auto-fill, minmax(90px, 1fr))'},[theme.breakpoints.down('sm')]:{gridTemplateColumns:'repeat(auto-fill, minmax(80px, 1fr))',gap:theme.spacing(0.5)}};});const StyledSelect=styled(Select)(_ref4=>{let{theme}=_ref4;return{backgroundColor:theme.palette.background.default,color:theme.palette.text.primary,'& .MuiSelect-select':{padding:'8px 32px 8px 12px',[theme.breakpoints.down('sm')]:{padding:'6px 24px 6px 8px',fontSize:'0.875rem'},[theme.breakpoints.down('xs')]:{padding:'4px 20px 4px 6px',fontSize:'0.75rem'}},'& .MuiOutlinedInput-notchedOutline':{border:'none'},'& .MuiSvgIcon-root':{color:theme.palette.text.primary,[theme.breakpoints.down('sm')]:{fontSize:'1.25rem'}},'&:hover':{backgroundColor:theme.palette.action.hover},'& .MuiMenu-paper':{backgroundColor:theme.palette.background.paper},width:'100%'};});const ActionButton=styled(Button)(_ref5=>{let{theme}=_ref5;return{backgroundColor:theme.palette.background.default,color:theme.palette.text.primary,'&:hover':{backgroundColor:theme.palette.action.hover},textTransform:'none',boxShadow:'none',width:'100%',height:'40px',[theme.breakpoints.down('sm')]:{height:'36px',fontSize:'0.875rem',padding:'6px 8px'},[theme.breakpoints.down('xs')]:{height:'32px',fontSize:'0.75rem',padding:'4px 6px'}};});const PopoverContent=styled(Box)(_ref6=>{let{theme}=_ref6;return{padding:theme.spacing(2),[theme.breakpoints.down('sm')]:{padding:theme.spacing(1.5)},[theme.breakpoints.down('xs')]:{padding:theme.spacing(1)},maxWidth:'300px',width:'100%',maxHeight:'80vh',overflow:'auto'};});const FilterPopover=styled(Popover)(_ref7=>{let{theme}=_ref7;return{'& .MuiPopover-paper':{backgroundColor:theme.palette.background.paper,marginTop:'8px',minWidth:'300px',maxHeight:'80vh',padding:theme.spacing(2),[theme.breakpoints.down('sm')]:{minWidth:'280px',padding:theme.spacing(1.5)}}};});const ApplyButton=styled(Button)(_ref8=>{let{theme}=_ref8;return{backgroundColor:theme.palette.primary.main,color:'white','&:hover':{backgroundColor:theme.palette.primary.dark},marginTop:theme.spacing(2),width:'100%',[theme.breakpoints.down('sm')]:{marginTop:theme.spacing(1.5),height:'36px',fontSize:'0.875rem'}};});const CollapseButton=styled(Button)(_ref9=>{let{theme}=_ref9;return{color:theme.palette.primary.main,'&:hover':{backgroundColor:'transparent',textDecoration:'underline'},padding:0,marginTop:theme.spacing(1)};});const RangeContainer=styled(Box)(_ref10=>{let{theme}=_ref10;return{padding:theme.spacing(1,2),[theme.breakpoints.down('sm')]:{padding:theme.spacing(0.5,1)},'& .MuiTypography-caption':{color:theme.palette.text.secondary,[theme.breakpoints.down('sm')]:{fontSize:'0.75rem'}}};});const StyledTextField=styled(TextField)(_ref11=>{let{theme}=_ref11;return{'& .MuiOutlinedInput-root':{backgroundColor:theme.palette.background.default,'& fieldset':{border:'none'},'&:hover fieldset':{border:'none'},'&.Mui-focused fieldset':{border:'none'}},'& input':{padding:'8px 12px',width:'100px',[theme.breakpoints.down('sm')]:{padding:'6px 8px',width:'80px',fontSize:'0.875rem'}}};});const FilterBar=_ref12=>{let{filters,districts=[],onFilterChange}=_ref12;const theme=useTheme();const isMobile=useMediaQuery(theme.breakpoints.down('sm'));const isXSmall=useMediaQuery(theme.breakpoints.down('xs'));const[localFilters,setLocalFilters]=React.useState(filters);const[genderAnchorEl,setGenderAnchorEl]=React.useState(null);const[tempGenderFilters,setTempGenderFilters]=React.useState([]);const handleGenderClick=event=>{setGenderAnchorEl(event.currentTarget);setTempGenderFilters([...filters.gender]);};const handleGenderClose=()=>{setGenderAnchorEl(null);};const handleGenderChange=value=>{const currentIndex=tempGenderFilters.indexOf(value);const newChecked=[...tempGenderFilters];if(currentIndex===-1){newChecked.push(value);}else{newChecked.splice(currentIndex,1);}setTempGenderFilters(newChecked);};const handleGenderApply=()=>{const newFilters={...filters,gender:tempGenderFilters};setLocalFilters(newFilters);onFilterChange(newFilters);handleGenderClose();};const handleFilterChange=field=>event=>{const newFilters={...filters,[field]:event.target.value};setLocalFilters(newFilters);onFilterChange(newFilters);};const handleReset=()=>{const resetFilters={gender:[],appearance:{age:[18,70],height:[140,195],weight:[40,110],breastSize:[1,10],nationality:[],hairColor:[],bikiniZone:[]},district:[],price:{from:null,to:null,hasExpress:false},services:[],verification:[],other:[],outcall:false};setLocalFilters(resetFilters);onFilterChange(resetFilters);};const IconComponent=()=>/*#__PURE__*/_jsx(ArrowDownIcon,{});const genderOpen=Boolean(genderAnchorEl);const[appearanceAnchorEl,setAppearanceAnchorEl]=React.useState(null);const[tempAppearanceFilters,setTempAppearanceFilters]=React.useState(filters.appearance);const handleAppearanceClick=event=>{setAppearanceAnchorEl(event.currentTarget);setTempAppearanceFilters({...filters.appearance});};const handleAppearanceClose=()=>{setAppearanceAnchorEl(null);};const handleAppearanceApply=()=>{const newFilters={...filters,appearance:tempAppearanceFilters};setLocalFilters(newFilters);onFilterChange(newFilters);handleAppearanceClose();};const handleRangeChange=field=>(event,newValue)=>{setTempAppearanceFilters({...tempAppearanceFilters,[field]:newValue});};const handleCheckboxChange=(field,value)=>{const currentArray=tempAppearanceFilters[field];const currentIndex=currentArray.indexOf(value);const newArray=[...currentArray];if(currentIndex===-1){newArray.push(value);}else{newArray.splice(currentIndex,1);}setTempAppearanceFilters({...tempAppearanceFilters,[field]:newArray});};const appearanceOpen=Boolean(appearanceAnchorEl);const[districtAnchorEl,setDistrictAnchorEl]=React.useState(null);const[tempDistrictFilters,setTempDistrictFilters]=React.useState([]);const handleDistrictClick=event=>{setDistrictAnchorEl(event.currentTarget);setTempDistrictFilters([...filters.district]);};const handleDistrictClose=()=>{setDistrictAnchorEl(null);};const handleDistrictChange=value=>{const currentIndex=tempDistrictFilters.indexOf(value);const newChecked=[...tempDistrictFilters];if(currentIndex===-1){newChecked.push(value);}else{newChecked.splice(currentIndex,1);}setTempDistrictFilters(newChecked);};const handleDistrictApply=()=>{const newFilters={...filters,district:tempDistrictFilters};setLocalFilters(newFilters);onFilterChange(newFilters);handleDistrictClose();};const districtOpen=Boolean(districtAnchorEl);const[servicesAnchorEl,setServicesAnchorEl]=React.useState(null);const[tempServicesFilters,setTempServicesFilters]=React.useState(filters.services);const handleServicesClick=event=>{setServicesAnchorEl(event.currentTarget);setTempServicesFilters([...filters.services]);};const handleServicesClose=()=>{setServicesAnchorEl(null);};const handleServicesChange=value=>{const currentIndex=tempServicesFilters.indexOf(value);const newChecked=[...tempServicesFilters];if(currentIndex===-1){newChecked.push(value);}else{newChecked.splice(currentIndex,1);}setTempServicesFilters(newChecked);};const handleServicesApply=()=>{const newFilters={...filters,services:tempServicesFilters};setLocalFilters(newFilters);onFilterChange(newFilters);};const servicesOpen=Boolean(servicesAnchorEl);const[verificationAnchorEl,setVerificationAnchorEl]=React.useState(null);const[tempVerificationFilters,setTempVerificationFilters]=React.useState([]);const handleVerificationClick=event=>{setVerificationAnchorEl(event.currentTarget);setTempVerificationFilters([...filters.verification]);};const handleVerificationClose=()=>{setVerificationAnchorEl(null);};const handleVerificationChange=value=>{const currentIndex=tempVerificationFilters.indexOf(value);const newChecked=[...tempVerificationFilters];if(currentIndex===-1){newChecked.push(value);}else{newChecked.splice(currentIndex,1);}setTempVerificationFilters(newChecked);};const handleVerificationApply=()=>{const newFilters={...filters,verification:tempVerificationFilters};setLocalFilters(newFilters);onFilterChange(newFilters);handleVerificationClose();};const verificationOpen=Boolean(verificationAnchorEl);const[otherAnchorEl,setOtherAnchorEl]=React.useState(null);const[tempOtherFilters,setTempOtherFilters]=React.useState([]);const handleOtherClick=event=>{setOtherAnchorEl(event.currentTarget);setTempOtherFilters([...filters.other]);};const handleOtherClose=()=>{setOtherAnchorEl(null);};const handleOtherChange=value=>{const currentIndex=tempOtherFilters.indexOf(value);const newChecked=[...tempOtherFilters];if(currentIndex===-1){newChecked.push(value);}else{newChecked.splice(currentIndex,1);}setTempOtherFilters(newChecked);};const handleOtherApply=()=>{const newFilters={...filters,other:tempOtherFilters};setLocalFilters(newFilters);onFilterChange(newFilters);handleOtherClose();};const otherOpen=Boolean(otherAnchorEl);const handleOutcallChange=event=>{const newFilters={...filters,outcall:event.target.checked};setLocalFilters(newFilters);onFilterChange(newFilters);};const[priceAnchorEl,setPriceAnchorEl]=React.useState(null);const[tempPriceFilters,setTempPriceFilters]=React.useState(filters.price);const handlePriceClick=event=>{setPriceAnchorEl(event.currentTarget);setTempPriceFilters({...filters.price});};const handlePriceClose=()=>{setPriceAnchorEl(null);};const handlePriceFromChange=event=>{const value=event.target.value===''?null:Number(event.target.value);setTempPriceFilters({...tempPriceFilters,from:value});};const handlePriceToChange=event=>{const value=event.target.value===''?null:Number(event.target.value);setTempPriceFilters({...tempPriceFilters,to:value});};const handleExpressChange=event=>{setTempPriceFilters({...tempPriceFilters,hasExpress:event.target.checked});};const handlePriceApply=()=>{const newFilters={...filters,price:tempPriceFilters};setLocalFilters(newFilters);onFilterChange(newFilters);handlePriceClose();};const priceOpen=Boolean(priceAnchorEl);// Создаем переменную для отображения информации о цене\nconst priceLabel=filters.price.from||filters.price.to?`${filters.price.from||''}${filters.price.from&&filters.price.to?'-':''}${filters.price.to||''}₽`:'';const renderFilterButton=(label,onClick)=>/*#__PURE__*/_jsx(ActionButton,{onClick:onClick,endIcon:/*#__PURE__*/_jsx(ArrowDownIcon,{}),variant:\"outlined\",className:\"filter-button\",sx:{justifyContent:'space-between',textAlign:'left',fontSize:isXSmall?'0.75rem':isMobile?'0.875rem':'inherit'},children:label});const renderFilterPopover=(anchorEl,onClose,children,title,onApply)=>/*#__PURE__*/_jsxs(FilterPopover,{anchorEl:anchorEl,open:Boolean(anchorEl),onClose:onClose,anchorOrigin:{vertical:'bottom',horizontal:'left'},transformOrigin:{vertical:'top',horizontal:'left'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,sx:{fontWeight:'bold'},children:title}),children,/*#__PURE__*/_jsx(ApplyButton,{onClick:()=>{onApply();onClose();},children:\"\\u041F\\u0440\\u0438\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"})]});return/*#__PURE__*/_jsxs(FilterContainer,{children:[renderFilterButton('Пол',handleGenderClick),renderFilterButton('Внешность',handleAppearanceClick),districts.length>0&&renderFilterButton('Район',handleDistrictClick),renderFilterButton('Услуги',handleServicesClick),renderFilterButton('Проверка',handleVerificationClick),renderFilterButton('Остальное',handleOtherClick),renderFilterButton(`Цена ${priceLabel}`,handlePriceClick),/*#__PURE__*/_jsx(ActionButton,{onClick:()=>handleReset(),variant:\"outlined\",color:\"error\",sx:{gridColumn:isMobile?'span 2':'auto',fontSize:isXSmall?'0.75rem':isMobile?'0.875rem':'inherit'},children:\"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C\"}),renderFilterPopover(genderAnchorEl,handleGenderClose,/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexDirection:'column',gap:1},children:['Женщины','Мужчины','Транс'].map(value=>/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{checked:tempGenderFilters.includes(value),onChange:()=>handleGenderChange(value),size:isMobile?'small':'medium'}),label:value,sx:{[theme.breakpoints.down('sm')]:{margin:0,'& .MuiFormControlLabel-label':{fontSize:'0.875rem'}}}},value))}),'Выберите пол',handleGenderApply),renderFilterPopover(appearanceAnchorEl,handleAppearanceClose,/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',gap:2},children:[/*#__PURE__*/_jsxs(RangeContainer,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",gutterBottom:true,children:\"\\u0412\\u043E\\u0437\\u0440\\u0430\\u0441\\u0442\"}),/*#__PURE__*/_jsx(Slider,{value:tempAppearanceFilters.age,onChange:handleRangeChange('age'),valueLabelDisplay:\"auto\",min:18,max:70,marks:true,size:isMobile?'small':'medium'})]}),/*#__PURE__*/_jsxs(RangeContainer,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",gutterBottom:true,children:\"\\u0420\\u043E\\u0441\\u0442\"}),/*#__PURE__*/_jsx(Slider,{value:tempAppearanceFilters.height,onChange:handleRangeChange('height'),valueLabelDisplay:\"auto\",min:140,max:195,marks:true,size:isMobile?'small':'medium'})]}),/*#__PURE__*/_jsxs(RangeContainer,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",gutterBottom:true,children:\"\\u0412\\u0435\\u0441\"}),/*#__PURE__*/_jsx(Slider,{value:tempAppearanceFilters.weight,onChange:handleRangeChange('weight'),valueLabelDisplay:\"auto\",min:40,max:110,marks:true,size:isMobile?'small':'medium'})]})]}),'Внешность',handleAppearanceApply),renderFilterPopover(districtAnchorEl,handleDistrictClose,/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexDirection:'column',gap:1},children:districts.map(district=>/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{checked:tempDistrictFilters.includes(district),onChange:()=>handleDistrictChange(district),size:isMobile?'small':'medium'}),label:district,sx:{[theme.breakpoints.down('sm')]:{margin:0,'& .MuiFormControlLabel-label':{fontSize:'0.875rem'}}}},district))}),'Выберите район',handleDistrictApply),renderFilterPopover(priceAnchorEl,handlePriceClose,/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',gap:2},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:2},children:[/*#__PURE__*/_jsx(Typography,{children:\"\\u041E\\u0442\"}),/*#__PURE__*/_jsx(StyledTextField,{type:\"number\",value:tempPriceFilters.from||'',onChange:handlePriceFromChange,placeholder:\"0\"}),/*#__PURE__*/_jsx(Typography,{children:\"\\u0414\\u043E\"}),/*#__PURE__*/_jsx(StyledTextField,{type:\"number\",value:tempPriceFilters.to||'',onChange:handlePriceToChange,placeholder:\"\\u221E\"})]}),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{checked:tempPriceFilters.hasExpress,onChange:handleExpressChange,size:isMobile?'small':'medium'}),label:\"\\u042D\\u043A\\u0441\\u043F\\u0440\\u0435\\u0441\\u0441\"})]}),'Цена за час',handlePriceApply),renderFilterPopover(servicesAnchorEl,handleServicesClose,/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexDirection:'column',gap:1},children:SERVICE_OPTIONS.map(service=>/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{checked:tempServicesFilters.includes(service),onChange:()=>handleServicesChange(service),size:isMobile?'small':'medium'}),label:serviceTranslations[service],sx:{[theme.breakpoints.down('sm')]:{margin:0,'& .MuiFormControlLabel-label':{fontSize:'0.875rem'}}}},service))}),'Выберите услуги',handleServicesApply),renderFilterPopover(verificationAnchorEl,handleVerificationClose,/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexDirection:'column',gap:1},children:['Верифицирован','VIP','Новенькая'].map(value=>/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{checked:tempVerificationFilters.includes(value),onChange:()=>handleVerificationChange(value),size:isMobile?'small':'medium'}),label:value,sx:{[theme.breakpoints.down('sm')]:{margin:0,'& .MuiFormControlLabel-label':{fontSize:'0.875rem'}}}},value))}),'Верификация',handleVerificationApply),renderFilterPopover(otherAnchorEl,handleOtherClose,/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',gap:1},children:[/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{checked:tempOtherFilters.includes('outcall'),onChange:()=>handleOtherChange('outcall'),size:isMobile?'small':'medium'}),label:\"\\u0412\\u044B\\u0435\\u0437\\u0434\"}),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{checked:tempOtherFilters.includes('apartment'),onChange:()=>handleOtherChange('apartment'),size:isMobile?'small':'medium'}),label:\"\\u0410\\u043F\\u0430\\u0440\\u0442\\u0430\\u043C\\u0435\\u043D\\u0442\\u044B\"})]}),'Дополнительно',handleOtherApply)]});};export default FilterBar;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}