{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Paper,Typography,TextField,Button,Box,Alert,CircularProgress}from'@mui/material';import{useNavigate}from'react-router-dom';import{api}from'../../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginPage=()=>{const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const navigate=useNavigate();// Проверяем, авторизован ли пользователь\nuseEffect(()=>{if(api.auth.isAuthenticated()){navigate('/admin/dashboard');}},[navigate]);const handleSubmit=async e=>{e.preventDefault();setError(null);setLoading(true);try{console.log('Попытка входа с логином:',username);const response=await api.auth.login(username,password);console.log('Вход выполнен успешно, данные:',response.data);navigate('/admin/dashboard');}catch(err){var _err$response,_err$response$data;console.error('Ошибка входа:',err);setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Ошибка входа. Проверьте логин и пароль.');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(Container,{maxWidth:\"sm\",sx:{mt:8},children:/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{p:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,align:\"center\",children:\"\\u0412\\u0445\\u043E\\u0434 \\u0432 \\u043F\\u0430\\u043D\\u0435\\u043B\\u044C \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\\u0430\"}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:error}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,noValidate:true,children:[/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"username\",label:\"\\u041B\\u043E\\u0433\\u0438\\u043D\",name:\"username\",autoComplete:\"username\",autoFocus:true,value:username,onChange:e=>setUsername(e.target.value),disabled:loading}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",type:\"password\",id:\"password\",autoComplete:\"current-password\",value:password,onChange:e=>setPassword(e.target.value),disabled:loading}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",sx:{mt:3,mb:2},disabled:loading,children:loading?/*#__PURE__*/_jsx(CircularProgress,{size:24}):'Войти'})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",align:\"center\",sx:{mt:2},children:\"\\u041F\\u043E \\u0443\\u043C\\u043E\\u043B\\u0447\\u0430\\u043D\\u0438\\u044E: \\u043B\\u043E\\u0433\\u0438\\u043D - admin, \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C - admin123\"})]})});};export default LoginPage;","map":{"version":3,"names":["React","useState","useEffect","Container","Paper","Typography","TextField","Button","Box","Alert","CircularProgress","useNavigate","api","jsx","_jsx","jsxs","_jsxs","LoginPage","username","setUsername","password","setPassword","loading","setLoading","error","setError","navigate","auth","isAuthenticated","handleSubmit","e","preventDefault","console","log","response","login","data","err","_err$response","_err$response$data","message","maxWidth","sx","mt","children","elevation","p","variant","component","gutterBottom","align","severity","mb","onSubmit","noValidate","margin","required","fullWidth","id","label","name","autoComplete","autoFocus","value","onChange","target","disabled","type","size"],"sources":["/root/escort-project/client/src/pages/admin/LoginPage.tsx"],"sourcesContent":["import ProfileOrderButtons from \"../../components/admin/ProfileOrderButtons\";\nimport React, { useState, useEffect } from 'react';\nimport {\n  Container,\n  Paper,\n  Typography,\n  TextField,\n  Button,\n  Box,\n  Alert,\n  CircularProgress\n} from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport { api } from '../../api';\n\nconst LoginPage: React.FC = () => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const navigate = useNavigate();\n\n  // Проверяем, авторизован ли пользователь\n  useEffect(() => {\n    if (api.auth.isAuthenticated()) {\n      navigate('/admin/dashboard');\n    }\n  }, [navigate]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setLoading(true);\n\n    try {\n      console.log('Попытка входа с логином:', username);\n      const response = await api.auth.login(username, password);\n      console.log('Вход выполнен успешно, данные:', response.data);\n      navigate('/admin/dashboard');\n    } catch (err: any) {\n      console.error('Ошибка входа:', err);\n      setError(err.response?.data?.message || 'Ошибка входа. Проверьте логин и пароль.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Container maxWidth=\"sm\" sx={{ mt: 8 }}>\n      <Paper elevation={3} sx={{ p: 4 }}>\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom align=\"center\">\n          Вход в панель администратора\n        </Typography>\n        \n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            {error}\n          </Alert>\n        )}\n        \n        <Box component=\"form\" onSubmit={handleSubmit} noValidate>\n          <TextField\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"username\"\n            label=\"Логин\"\n            name=\"username\"\n            autoComplete=\"username\"\n            autoFocus\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n            disabled={loading}\n          />\n          <TextField\n            margin=\"normal\"\n            required\n            fullWidth\n            name=\"password\"\n            label=\"Пароль\"\n            type=\"password\"\n            id=\"password\"\n            autoComplete=\"current-password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            disabled={loading}\n          />\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            sx={{ mt: 3, mb: 2 }}\n            disabled={loading}\n          >\n            {loading ? <CircularProgress size={24} /> : 'Войти'}\n          </Button>\n        </Box>\n        \n        <Typography variant=\"body2\" align=\"center\" sx={{ mt: 2 }}>\n          По умолчанию: логин - admin, пароль - admin123\n        </Typography>\n      </Paper>\n    </Container>\n  );\n};\n\nexport default LoginPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}