{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Typography,Box,TextField,Button,Grid,Alert,Divider,Switch,FormControlLabel,Card,CardContent,Snackbar,CircularProgress}from'@mui/material';import{Save as SaveIcon,Security,Telegram,AttachMoney,Photo}from'@mui/icons-material';import axios from'axios';import{API_URL}from'../../config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SettingsPage=()=>{const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState(false);const[settings,setSettings]=useState({telegramUsername:'',notificationsEnabled:true,autoModeration:false,defaultCity:'',maintenanceMode:false,watermarkEnabled:true,watermarkText:'',minPhotoCount:3,maxPhotoCount:10,defaultPriceHour:5000,defaultPriceTwoHours:10000,defaultPriceNight:30000});useEffect(()=>{const fetchSettings=async()=>{try{const token=localStorage.getItem('adminToken');const response=await axios.get(`${API_URL}/admin/settings`,{headers:{Authorization:`Bearer ${token}`}});setSettings(response.data);}catch(error){console.error('Error fetching settings:',error);setError('Ошибка при загрузке настроек');}finally{setLoading(false);}};fetchSettings();},[]);const handleSave=async()=>{setSaving(true);setError('');setSuccess(false);try{const token=localStorage.getItem('adminToken');await axios.put(`${API_URL}/admin/settings`,settings,{headers:{Authorization:`Bearer ${token}`}});setSuccess(true);}catch(error){console.error('Error saving settings:',error);setError('Ошибка при сохранении настроек');}finally{setSaving(false);}};if(loading){return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',alignItems:'center',height:'100vh'},children:/*#__PURE__*/_jsx(CircularProgress,{})});}return/*#__PURE__*/_jsxs(Container,{maxWidth:\"lg\",children:[/*#__PURE__*/_jsx(Box,{sx:{mb:4},children:/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:\"\\u041D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0438 \\u0441\\u0430\\u0439\\u0442\\u0430\"})}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:error}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:2},children:[/*#__PURE__*/_jsx(Telegram,{sx:{mr:1}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"\\u041A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442\\u044B\"})]}),/*#__PURE__*/_jsx(Divider,{sx:{mb:2}}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Telegram \\u0434\\u043B\\u044F \\u0441\\u0432\\u044F\\u0437\\u0438\",value:settings.telegramUsername,onChange:e=>setSettings({...settings,telegramUsername:e.target.value}),margin:\"normal\",helperText:\"\\u0423\\u043A\\u0430\\u0436\\u0438\\u0442\\u0435 username \\u0431\\u0435\\u0437 @\"}),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:settings.notificationsEnabled,onChange:e=>setSettings({...settings,notificationsEnabled:e.target.checked})}),label:\"\\u0412\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u044C \\u0443\\u0432\\u0435\\u0434\\u043E\\u043C\\u043B\\u0435\\u043D\\u0438\\u044F \\u0432 Telegram\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:2},children:[/*#__PURE__*/_jsx(Security,{sx:{mr:1}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"\\u0411\\u0435\\u0437\\u043E\\u043F\\u0430\\u0441\\u043D\\u043E\\u0441\\u0442\\u044C\"})]}),/*#__PURE__*/_jsx(Divider,{sx:{mb:2}}),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:settings.autoModeration,onChange:e=>setSettings({...settings,autoModeration:e.target.checked})}),label:\"\\u0410\\u0432\\u0442\\u043E\\u043C\\u043E\\u0434\\u0435\\u0440\\u0430\\u0446\\u0438\\u044F \\u0430\\u043D\\u043A\\u0435\\u0442\"}),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:settings.maintenanceMode,onChange:e=>setSettings({...settings,maintenanceMode:e.target.checked})}),label:\"\\u0420\\u0435\\u0436\\u0438\\u043C \\u043E\\u0431\\u0441\\u043B\\u0443\\u0436\\u0438\\u0432\\u0430\\u043D\\u0438\\u044F\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:2},children:[/*#__PURE__*/_jsx(Photo,{sx:{mr:1}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"\\u041D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0438 \\u0444\\u043E\\u0442\\u043E\\u0433\\u0440\\u0430\\u0444\\u0438\\u0439\"})]}),/*#__PURE__*/_jsx(Divider,{sx:{mb:2}}),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:settings.watermarkEnabled,onChange:e=>setSettings({...settings,watermarkEnabled:e.target.checked})}),label:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u043B\\u044F\\u0442\\u044C \\u0432\\u043E\\u0434\\u044F\\u043D\\u043E\\u0439 \\u0437\\u043D\\u0430\\u043A\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"\\u0422\\u0435\\u043A\\u0441\\u0442 \\u0432\\u043E\\u0434\\u044F\\u043D\\u043E\\u0433\\u043E \\u0437\\u043D\\u0430\\u043A\\u0430\",value:settings.watermarkText,onChange:e=>setSettings({...settings,watermarkText:e.target.value}),margin:\"normal\",disabled:!settings.watermarkEnabled}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"number\",label:\"\\u041C\\u0438\\u043D. \\u043A\\u043E\\u043B-\\u0432\\u043E \\u0444\\u043E\\u0442\\u043E\",value:settings.minPhotoCount,onChange:e=>setSettings({...settings,minPhotoCount:Number(e.target.value)}),margin:\"normal\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"number\",label:\"\\u041C\\u0430\\u043A\\u0441. \\u043A\\u043E\\u043B-\\u0432\\u043E \\u0444\\u043E\\u0442\\u043E\",value:settings.maxPhotoCount,onChange:e=>setSettings({...settings,maxPhotoCount:Number(e.target.value)}),margin:\"normal\"})})]})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:2},children:[/*#__PURE__*/_jsx(AttachMoney,{sx:{mr:1}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"\\u0426\\u0435\\u043D\\u044B \\u043F\\u043E \\u0443\\u043C\\u043E\\u043B\\u0447\\u0430\\u043D\\u0438\\u044E\"})]}),/*#__PURE__*/_jsx(Divider,{sx:{mb:2}}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"number\",label:\"\\u0426\\u0435\\u043D\\u0430 \\u0437\\u0430 1 \\u0447\\u0430\\u0441\",value:settings.defaultPriceHour,onChange:e=>setSettings({...settings,defaultPriceHour:Number(e.target.value)}),margin:\"normal\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"number\",label:\"\\u0426\\u0435\\u043D\\u0430 \\u0437\\u0430 2 \\u0447\\u0430\\u0441\\u0430\",value:settings.defaultPriceTwoHours,onChange:e=>setSettings({...settings,defaultPriceTwoHours:Number(e.target.value)}),margin:\"normal\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"number\",label:\"\\u0426\\u0435\\u043D\\u0430 \\u0437\\u0430 \\u043D\\u043E\\u0447\\u044C\",value:settings.defaultPriceNight,onChange:e=>setSettings({...settings,defaultPriceNight:Number(e.target.value)}),margin:\"normal\"})]})})})]}),/*#__PURE__*/_jsx(Box,{sx:{mt:4,display:'flex',justifyContent:'flex-end'},children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:saving?/*#__PURE__*/_jsx(CircularProgress,{size:20,color:\"inherit\"}):/*#__PURE__*/_jsx(SaveIcon,{}),onClick:handleSave,disabled:saving,children:saving?'Сохранение...':'Сохранить настройки'})}),/*#__PURE__*/_jsx(Snackbar,{open:success,autoHideDuration:6000,onClose:()=>setSuccess(false),message:\"\\u041D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0438 \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E \\u0441\\u043E\\u0445\\u0440\\u0430\\u043D\\u0435\\u043D\\u044B\"})]});};export default SettingsPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}