{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Typography,Grid,Card,CardContent,CardActions,IconButton,Button,CircularProgress,Box,Paper,Divider}from'@mui/material';import EditIcon from'@mui/icons-material/Edit';import DeleteIcon from'@mui/icons-material/Delete';import AdminLayout from'../../components/admin/AdminLayout';import{apiClient}from'../../api-wrapper';import ProfileOrderButtons from'../../components/admin/ProfileOrderButtons';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminDashboard=()=>{const[profiles,setProfiles]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{fetchProfiles();},[]);const fetchProfiles=async()=>{try{setLoading(true);const response=await apiClient.get('/admin/profiles');setProfiles(response.data);setError('');}catch(err){console.error('Ошибка при загрузке профилей:',err);setError('Не удалось загрузить данные. Пожалуйста, попробуйте позже.');}finally{setLoading(false);}};const handleEdit=id=>{window.location.href=`/admin/profiles/edit/${id}`;};const handleDelete=id=>{if(window.confirm('Вы уверены, что хотите удалить эту анкету?')){apiClient.delete(`/admin/profiles/${id}`).then(()=>{fetchProfiles();}).catch(err=>{console.error('Ошибка при удалении:',err);alert('Не удалось удалить анкету');});}};return/*#__PURE__*/_jsx(AdminLayout,{children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,children:\"\\u041F\\u0430\\u043D\\u0435\\u043B\\u044C \\u0443\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F\"}),/*#__PURE__*/_jsxs(Paper,{sx:{padding:2,mb:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:\"\\u041D\\u0435\\u0434\\u0430\\u0432\\u043D\\u0438\\u0435 \\u0430\\u043D\\u043A\\u0435\\u0442\\u044B\"}),/*#__PURE__*/_jsx(Divider,{sx:{mb:2}}),loading?/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',p:3},children:/*#__PURE__*/_jsx(CircularProgress,{})}):error?/*#__PURE__*/_jsx(Typography,{color:\"error\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:profiles.slice(0,6).map(profile=>{var _profile$city;return/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:4,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:profile.name}),/*#__PURE__*/_jsxs(Typography,{color:\"textSecondary\",children:[profile.age,\" \\u043B\\u0435\\u0442\"]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:((_profile$city=profile.city)===null||_profile$city===void 0?void 0:_profile$city.name)||'Город не указан'}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[profile.price1Hour,\" \\u20BD/\\u0447\\u0430\\u0441\"]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441: \",profile.isActive?'Активен':'Неактивен']})]}),/*#__PURE__*/_jsxs(CardActions,{children:[/*#__PURE__*/_jsx(IconButton,{onClick:()=>handleEdit(profile.id),size:\"small\",color:\"primary\",children:/*#__PURE__*/_jsx(EditIcon,{})}),profile&&/*#__PURE__*/_jsx(ProfileOrderButtons,{profileId:profile.id}),/*#__PURE__*/_jsx(IconButton,{onClick:()=>handleDelete(profile.id),size:\"small\",color:\"error\",children:/*#__PURE__*/_jsx(DeleteIcon,{})})]})]})},profile.id);})}),profiles.length>6&&/*#__PURE__*/_jsx(Box,{sx:{mt:2,textAlign:'right'},children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:()=>window.location.href='/admin/profiles',children:\"\\u041F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C \\u0432\\u0441\\u0435 \\u0430\\u043D\\u043A\\u0435\\u0442\\u044B\"})}),profiles.length===0&&/*#__PURE__*/_jsx(Typography,{align:\"center\",sx:{py:3},children:\"\\u0410\\u043D\\u043A\\u0435\\u0442\\u044B \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u044B\"})]})]}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'flex-end',mt:2},children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:()=>window.location.href='/admin/profiles/create',children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043D\\u043E\\u0432\\u0443\\u044E \\u0430\\u043D\\u043A\\u0435\\u0442\\u0443\"})})]})});};export default AdminDashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}