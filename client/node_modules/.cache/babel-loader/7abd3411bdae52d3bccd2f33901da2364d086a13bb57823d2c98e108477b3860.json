{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,CircularProgress,Box,Alert,Typography,styled,useMediaQuery,useTheme}from'@mui/material';import Header from'../components/Header';import FilterBar from'../components/FilterBar';import ProfileCard from'../components/ProfileCard';import CommonSEO from'../components/SEO/CommonSEO';import axios from'axios';import{API_URL}from'../config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PageContainer=styled(Box)(_ref=>{let{theme}=_ref;return{minHeight:'100vh',backgroundColor:theme.palette.background.default,paddingBottom:theme.spacing(4),[theme.breakpoints.down('sm')]:{paddingBottom:theme.spacing(2)}};});const ContentContainer=styled(Container)(_ref2=>{let{theme}=_ref2;return{paddingTop:theme.spacing(3),paddingBottom:theme.spacing(4),[theme.breakpoints.down('sm')]:{paddingTop:theme.spacing(2),paddingBottom:theme.spacing(2)}};});const ProfilesGrid=styled(Box)(_ref3=>{let{theme}=_ref3;return{display:'grid',gridTemplateColumns:'repeat(auto-fill, minmax(300px, 1fr))',gap:theme.spacing(3),margin:theme.spacing(3,0),[theme.breakpoints.down('md')]:{gridTemplateColumns:'repeat(auto-fill, minmax(250px, 1fr))',gap:theme.spacing(2)},[theme.breakpoints.down('sm')]:{gridTemplateColumns:'repeat(auto-fill, minmax(200px, 1fr))',gap:theme.spacing(1.5),margin:theme.spacing(2,0)},[theme.breakpoints.down('xs')]:{gridTemplateColumns:'1fr',gap:theme.spacing(1),margin:theme.spacing(1.5,0)}};});const LoadingContainer=styled(Box)(_ref4=>{let{theme}=_ref4;return{display:'flex',justifyContent:'center',alignItems:'center',height:'50vh',flexDirection:'column',gap:theme.spacing(2),[theme.breakpoints.down('sm')]:{height:'40vh',gap:theme.spacing(1)}};});const StyledAlert=styled(Alert)(_ref5=>{let{theme}=_ref5;return{marginBottom:theme.spacing(2),borderRadius:theme.shape.borderRadius,[theme.breakpoints.down('sm')]:{marginBottom:theme.spacing(1),'& .MuiAlert-message':{fontSize:'0.875rem'}}};});const WelcomeSection=styled(Box)(_ref6=>{let{theme}=_ref6;return{marginBottom:theme.spacing(4),textAlign:'center',padding:theme.spacing(2),display:'grid',gap:theme.spacing(2),[theme.breakpoints.down('sm')]:{marginBottom:theme.spacing(2),padding:theme.spacing(1),gap:theme.spacing(1)}};});const initialFilters={gender:[],appearance:{age:[18,70],height:[140,195],weight:[40,110],breastSize:[1,10],nationality:[],hairColor:[],bikiniZone:[]},district:[],price:{from:null,to:null,hasExpress:false},services:[],verification:[],other:[],outcall:false};const HomePage=()=>{const theme=useTheme();const isMobile=useMediaQuery(theme.breakpoints.down('sm'));const isXSmall=useMediaQuery(theme.breakpoints.down('xs'));const[profiles,setProfiles]=useState([]);const[cities,setCities]=useState([]);const[selectedCity,setSelectedCity]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[languages]=useState([{id:1,code:'ru',name:'Русский'},{id:2,code:'en',name:'English'}]);const[selectedLanguage,setSelectedLanguage]=useState(languages[0]);const[filters,setFilters]=useState(initialFilters);const[districts,setDistricts]=useState([]);const[services,setServices]=useState([]);useEffect(()=>{// Загрузка городов\nconst fetchCities=async()=>{try{const response=await axios.get(`${API_URL}/cities`);setCities(response.data);if(response.data.length>0){setSelectedCity(response.data[0]);}}catch(error){console.error('Ошибка при загрузке городов:',error);setError('Ошибка при загрузке городов');}};fetchCities();},[]);useEffect(()=>{// Загрузка анкет\nconst fetchProfiles=async()=>{setLoading(true);setError('');try{const params={...(selectedCity&&{cityId:selectedCity.id}),filters:JSON.stringify(filters)};const response=await axios.get(`${API_URL}/profiles`,{params});setProfiles(response.data);}catch(error){console.error('Ошибка при загрузке анкет:',error);setError('Ошибка при загрузке анкет');}finally{setLoading(false);}};fetchProfiles();},[selectedCity,filters]);useEffect(()=>{// Загрузка справочников для фильтров\nconst fetchFilterData=async()=>{if(!selectedCity)return;try{const[districtsResponse,servicesResponse]=await Promise.all([axios.get(`${API_URL}/districts/${selectedCity.id}`),axios.get(`${API_URL}/services`)]);setDistricts(districtsResponse.data);setServices(servicesResponse.data);}catch(error){console.error('Ошибка при загрузке данных для фильтров:',error);}};fetchFilterData();},[selectedCity]);const renderContent=()=>{if(loading){return/*#__PURE__*/_jsxs(LoadingContainer,{children:[/*#__PURE__*/_jsx(CircularProgress,{size:isMobile?40:60}),/*#__PURE__*/_jsx(Typography,{variant:isMobile?\"body2\":\"h6\",color:\"text.secondary\",sx:{textAlign:'center'},children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0430\\u043D\\u043A\\u0435\\u0442...\"})]});}if(error){return/*#__PURE__*/_jsx(StyledAlert,{severity:\"error\",children:error});}if(profiles.length===0){return/*#__PURE__*/_jsx(StyledAlert,{severity:\"info\",children:\"\\u041F\\u043E \\u0432\\u0430\\u0448\\u0435\\u043C\\u0443 \\u0437\\u0430\\u043F\\u0440\\u043E\\u0441\\u0443 \\u043D\\u0438\\u0447\\u0435\\u0433\\u043E \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E\"});}return/*#__PURE__*/_jsx(ProfilesGrid,{children:profiles.map(profile=>/*#__PURE__*/_jsx(ProfileCard,{profile:profile},profile.id))});};return/*#__PURE__*/_jsxs(PageContainer,{children:[/*#__PURE__*/_jsx(CommonSEO,{cityName:selectedCity===null||selectedCity===void 0?void 0:selectedCity.name,isHomePage:true}),/*#__PURE__*/_jsx(Header,{cities:cities,languages:languages,selectedCity:selectedCity,selectedLanguage:selectedLanguage,onCityChange:setSelectedCity,onLanguageChange:setSelectedLanguage}),/*#__PURE__*/_jsxs(ContentContainer,{maxWidth:\"lg\",children:[/*#__PURE__*/_jsxs(WelcomeSection,{children:[/*#__PURE__*/_jsx(Typography,{variant:isMobile?\"h6\":\"h4\",component:\"h1\",gutterBottom:true,sx:{fontWeight:'bold',color:'primary.main',marginBottom:0,[theme.breakpoints.down('sm')]:{fontSize:'1.5rem',lineHeight:1.2}},children:\"\\u041F\\u0440\\u043E\\u0441\\u0442\\u0438\\u0442\\u0443\\u0442\\u043A\\u0438 \\u0420\\u043E\\u0441\\u0441\\u0438\\u0438 | VIP \\u042D\\u0441\\u043A\\u043E\\u0440\\u0442 \\u0443\\u0441\\u043B\\u0443\\u0433\\u0438\"}),/*#__PURE__*/_jsx(Typography,{variant:isMobile?\"body2\":\"body1\",color:\"text.secondary\",sx:{maxWidth:'800px',margin:'0 auto',[theme.breakpoints.down('sm')]:{fontSize:'0.875rem',lineHeight:1.4}},children:\"\\u041D\\u0430 \\u043D\\u0430\\u0448\\u0435\\u043C \\u0441\\u0430\\u0439\\u0442\\u0435 \\u043F\\u0440\\u0435\\u0434\\u0441\\u0442\\u0430\\u0432\\u043B\\u0435\\u043D\\u044B \\u044D\\u043B\\u0438\\u0442\\u043D\\u044B\\u0435 \\u043F\\u0440\\u043E\\u0441\\u0442\\u0438\\u0442\\u0443\\u0442\\u043A\\u0438 \\u0438 \\u0438\\u043D\\u0434\\u0438\\u0432\\u0438\\u0434\\u0443\\u0430\\u043B\\u043A\\u0438 \\u0438\\u0437 50 \\u0433\\u043E\\u0440\\u043E\\u0434\\u043E\\u0432 \\u0420\\u043E\\u0441\\u0441\\u0438\\u0438. \\u0412\\u0441\\u0435 \\u0430\\u043D\\u043A\\u0435\\u0442\\u044B \\u0441 \\u043F\\u0440\\u043E\\u0432\\u0435\\u0440\\u0435\\u043D\\u043D\\u044B\\u043C\\u0438 \\u0444\\u043E\\u0442\\u043E \\u0434\\u0435\\u0432\\u0443\\u0448\\u0435\\u043A, \\u043F\\u0440\\u0435\\u0434\\u043E\\u0441\\u0442\\u0430\\u0432\\u043B\\u044F\\u044E\\u0449\\u0438\\u0445 VIP \\u044D\\u0441\\u043A\\u043E\\u0440\\u0442 \\u0443\\u0441\\u043B\\u0443\\u0433\\u0438. \\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0433\\u043E\\u0440\\u043E\\u0434 \\u0438 \\u043D\\u0430\\u0439\\u0434\\u0438\\u0442\\u0435 \\u043F\\u043E\\u0434\\u0445\\u043E\\u0434\\u044F\\u0449\\u0443\\u044E \\u0434\\u0435\\u0432\\u0443\\u0448\\u043A\\u0443 \\u0434\\u043B\\u044F \\u043F\\u0440\\u0438\\u044F\\u0442\\u043D\\u043E\\u0433\\u043E \\u0432\\u0440\\u0435\\u043C\\u044F\\u043F\\u0440\\u0435\\u043F\\u0440\\u043E\\u0432\\u043E\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F.\"})]}),/*#__PURE__*/_jsx(FilterBar,{filters:filters,onFilterChange:setFilters,districts:districts}),renderContent()]})]});};export default HomePage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}