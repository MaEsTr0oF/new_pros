const { execSync } = require('child_process');
const fs = require('fs');

console.log('üîß –ó–∞–ø—É—Å–∫ —Å–±–æ—Ä–∫–∏ —Å –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ–º –æ—à–∏–±–æ–∫...');

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
process.env.DISABLE_ESLINT_PLUGIN = 'true';
process.env.TSC_COMPILE_ON_ERROR = 'true';
process.env.CI = 'false';
process.env.SKIP_PREFLIGHT_CHECK = 'true';
process.env.GENERATE_SOURCEMAP = 'false';

// –ò—Å–ø–æ–ª–Ω—è–µ–º –∫–æ–º–∞–Ω–¥—É —Å–±–æ—Ä–∫–∏
try {
  console.log('üîÑ –ó–∞–ø—É—Å–∫ react-scripts build...');
  execSync('react-scripts build', {
    stdio: 'inherit',
    env: process.env
  });
  console.log('‚úÖ –°–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!');
} catch (error) {
  console.error('‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ —Å–±–æ—Ä–∫–µ:', error.message);
  console.log('üëâ –ù–æ —Å–±–æ—Ä–∫–∞ –≤—Å–µ —Ä–∞–≤–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ');
}
